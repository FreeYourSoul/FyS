<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FreeYourSoul Online: fys::network::DispatcherConnectionManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="choco.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FreeYourSoul Online
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">MMORPG</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>fys</b></li><li class="navelem"><b>network</b></li><li class="navelem"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html">DispatcherConnectionManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfys_1_1network_1_1_dispatcher_connection_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fys::network::DispatcherConnectionManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae0e3789b542894047814c0602e1b069a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#ae0e3789b542894047814c0602e1b069a">DispatcherConnectionManager</a> (int threadNumber=1, bool isLoadBalancing=true) noexcept</td></tr>
<tr class="separator:ae0e3789b542894047814c0602e1b069a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c7378367a101c50352c3d0037f7e4b"><td class="memItemLeft" align="right" valign="top"><a id="ad4c7378367a101c50352c3d0037f7e4b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setupConnectionManager</b> (const <a class="el" href="classfys_1_1_startup_dispatcher_ctx.html">fys::StartupDispatcherCtx</a> &amp;ctx) noexcept</td></tr>
<tr class="separator:ad4c7378367a101c50352c3d0037f7e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4554f6c31b43d70ad653b9b7d663a6"><td class="memItemLeft" align="right" valign="top">std::tuple&lt; bool, bool, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a5b4554f6c31b43d70ad653b9b7d663a6">poll</a> () noexcept</td></tr>
<tr class="memdesc:a5b4554f6c31b43d70ad653b9b7d663a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll the reader socket (the listener one and the subscriber one if the dispatcher is cluster aware.  <a href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a5b4554f6c31b43d70ad653b9b7d663a6">More...</a><br /></td></tr>
<tr class="separator:a5b4554f6c31b43d70ad653b9b7d663a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2be255a1a680a01d444e9929b88853d"><td class="memTemplParams" colspan="2">template&lt;typename Handler &gt; </td></tr>
<tr class="memitem:ab2be255a1a680a01d444e9929b88853d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#ab2be255a1a680a01d444e9929b88853d">dispatchMessageFromListenerSocket</a> (Handler &amp;&amp;handler)</td></tr>
<tr class="memdesc:ab2be255a1a680a01d444e9929b88853d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the Listener socket and call a given handler with this message as parameter.  <a href="classfys_1_1network_1_1_dispatcher_connection_manager.html#ab2be255a1a680a01d444e9929b88853d">More...</a><br /></td></tr>
<tr class="separator:ab2be255a1a680a01d444e9929b88853d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e086c13b30b237f9d813ef9ab4402ee"><td class="memTemplParams" colspan="2">template&lt;typename Handler &gt; </td></tr>
<tr class="memitem:a5e086c13b30b237f9d813ef9ab4402ee"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a5e086c13b30b237f9d813ef9ab4402ee">dispatchMessageFromSubscriberSocket</a> (Handler &amp;&amp;handler) noexcept</td></tr>
<tr class="memdesc:a5e086c13b30b237f9d813ef9ab4402ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the Cluster subscriber socket and call a given handler with this message as parameter.  <a href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a5e086c13b30b237f9d813ef9ab4402ee">More...</a><br /></td></tr>
<tr class="separator:a5e086c13b30b237f9d813ef9ab4402ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77298948e3747e60431c235d21d15507"><td class="memTemplParams" colspan="2"><a id="a77298948e3747e60431c235d21d15507"></a>
template&lt;typename Handler &gt; </td></tr>
<tr class="memitem:a77298948e3747e60431c235d21d15507"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>dispatchMessageFromDispatcherSocket</b> (Handler &amp;&amp;handler) noexcept</td></tr>
<tr class="separator:a77298948e3747e60431c235d21d15507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad4e81f4d20213938ec257e2a36fb86"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#afad4e81f4d20213938ec257e2a36fb86">replyToListenerSocket</a> (zmq::multipart_t &amp;&amp;msg) noexcept</td></tr>
<tr class="memdesc:afad4e81f4d20213938ec257e2a36fb86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the frontend socket of the dispatcher (proxy). This socket is a router socket, and so the message has to contains an identity frame to be routed correctly.  <a href="classfys_1_1network_1_1_dispatcher_connection_manager.html#afad4e81f4d20213938ec257e2a36fb86">More...</a><br /></td></tr>
<tr class="separator:afad4e81f4d20213938ec257e2a36fb86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9a88ab523473d6ab928b0b1edc1c62"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a0c9a88ab523473d6ab928b0b1edc1c62">sendMessageToDispatcherSocket</a> (zmq::multipart_t &amp;&amp;msg) noexcept</td></tr>
<tr class="memdesc:a0c9a88ab523473d6ab928b0b1edc1c62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the servers connected to the dispatcher (load balanced, or distributed dispatching depending on the dispatcher configuration). The message has to contains the identity frame in order for the server to resend it in the reply.  <a href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a0c9a88ab523473d6ab928b0b1edc1c62">More...</a><br /></td></tr>
<tr class="separator:a0c9a88ab523473d6ab928b0b1edc1c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2350732d67f54ae362c14ce417d04042"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a2350732d67f54ae362c14ce417d04042">sendMessageToClusterPubSocket</a> (zmq::multipart_t &amp;&amp;msg) noexcept</td></tr>
<tr class="memdesc:a2350732d67f54ae362c14ce417d04042"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the dispatcher cluster (if configured in the dispatcher)  <a href="classfys_1_1network_1_1_dispatcher_connection_manager.html#a2350732d67f54ae362c14ce417d04042">More...</a><br /></td></tr>
<tr class="separator:a2350732d67f54ae362c14ce417d04042"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae0e3789b542894047814c0602e1b069a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e3789b542894047814c0602e1b069a">&#9670;&nbsp;</a></span>DispatcherConnectionManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fys::network::DispatcherConnectionManager::DispatcherConnectionManager </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadNumber</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isLoadBalancing</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threadNumber</td><td>number of thread used by the zmq::context in order to manage messages </td></tr>
    <tr><td class="paramname">isLoadBalancing</td><td>if true, a Dealer socket is instantiated in order to dispatch messages if false, a Publisher socket is instantiated to do so </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab2be255a1a680a01d444e9929b88853d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2be255a1a680a01d444e9929b88853d">&#9670;&nbsp;</a></span>dispatchMessageFromListenerSocket()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Handler &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fys::network::DispatcherConnectionManager::dispatchMessageFromListenerSocket </td>
          <td>(</td>
          <td class="paramtype">Handler &amp;&amp;&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the Listener socket and call a given handler with this message as parameter. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Handler</td><td>function to call after reading message from socket (multipart_t object sent as parameter) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>function instance to call which take zmq::multipart object as parameter </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e086c13b30b237f9d813ef9ab4402ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e086c13b30b237f9d813ef9ab4402ee">&#9670;&nbsp;</a></span>dispatchMessageFromSubscriberSocket()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Handler &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fys::network::DispatcherConnectionManager::dispatchMessageFromSubscriberSocket </td>
          <td>(</td>
          <td class="paramtype">Handler &amp;&amp;&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the Cluster subscriber socket and call a given handler with this message as parameter. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Handler</td><td>function to call after reading message from socket (multipart_t object sent as parameter) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>function instance to call which take zmq::multipart object as parameter </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b4554f6c31b43d70ad653b9b7d663a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4554f6c31b43d70ad653b9b7d663a6">&#9670;&nbsp;</a></span>poll()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::tuple&lt; bool, bool, bool &gt; fys::network::DispatcherConnectionManager::poll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Poll the reader socket (the listener one and the subscriber one if the dispatcher is cluster aware. </p>
<dl class="section return"><dt>Returns</dt><dd>a pair of bool with first : is there anything on the listener socket to read second : is there anything on the subscriber socket to read </dd></dl>

</div>
</div>
<a id="afad4e81f4d20213938ec257e2a36fb86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad4e81f4d20213938ec257e2a36fb86">&#9670;&nbsp;</a></span>replyToListenerSocket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool fys::network::DispatcherConnectionManager::replyToListenerSocket </td>
          <td>(</td>
          <td class="paramtype">zmq::multipart_t &amp;&amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message to the frontend socket of the dispatcher (proxy). This socket is a router socket, and so the message has to contains an identity frame to be routed correctly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>reply to the requester client of the dispatcher </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message has been sent correctly, false otherwise </dd></dl>

</div>
</div>
<a id="a2350732d67f54ae362c14ce417d04042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2350732d67f54ae362c14ce417d04042">&#9670;&nbsp;</a></span>sendMessageToClusterPubSocket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool fys::network::DispatcherConnectionManager::sendMessageToClusterPubSocket </td>
          <td>(</td>
          <td class="paramtype">zmq::multipart_t &amp;&amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message to the dispatcher cluster (if configured in the dispatcher) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>notification to send to the dispatcher cluster </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message has been sent correctly, false otherwise </dd></dl>

</div>
</div>
<a id="a0c9a88ab523473d6ab928b0b1edc1c62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9a88ab523473d6ab928b0b1edc1c62">&#9670;&nbsp;</a></span>sendMessageToDispatcherSocket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool fys::network::DispatcherConnectionManager::sendMessageToDispatcherSocket </td>
          <td>(</td>
          <td class="paramtype">zmq::multipart_t &amp;&amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a message to the servers connected to the dispatcher (load balanced, or distributed dispatching depending on the dispatcher configuration). The message has to contains the identity frame in order for the server to resend it in the reply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>incoming message forwarded to the dispatched server </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message has been sent correctly, false otherwise </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/FyS/Project/FyS/dispatcher/common/include/core/<a class="el" href="_dispatcher_connection_manager_8hh_source.html">DispatcherConnectionManager.hh</a></li>
<li>/home/FyS/Project/FyS/dispatcher/common/src/core/DispatcherConnectionManager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
